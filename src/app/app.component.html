<div class="flex flex-row h-full">
  <div class="left sidebar min-h-full w-2 p-shadow-3 overflow-hidden z-3">
    <div class="p-1 flex flex-column h-full overflow-y-auto">
      <div class="flex flex-row">
        <span class="p-input-icon-right w-full" style="margin-bottom: 1px;">
          <i class="pi pi-search"></i>
          <input type="text" class="w-full" placeholder="Search/Create" pInputText />
        </span>
        <div
          class="button-border border-clickable flex flex-column align-content-center justify-content-center color-surface-card"
          style="margin-bottom: 1px; margin-left: 1px;">
          <i class="pi pi-ellipsis-v icon-button"></i>
        </div>
      </div>
      <p-panel [toggleable]="true" #notes class="sidemenuPanel note-panel notes" [collapsed]="true">
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center">
            <button (click)="notes.toggle($event); $event.stopPropagation();" pButton pRipple type="button"
              [icon]="'pi '+(notes.collapsed?'pi-chevron-right':'pi-chevron-down')"
              class="p-panel-header-icon"></button>
            <span>
              Notes
            </span>
          </div>
        </ng-template>
        <ng-template pTemplate="icons">
          <div class="flex justify-content-between align-items-center">
            <button (click)="addNoteOverlay.toggle($event); $event.stopPropagation()" pButton pRipple type="button"
              [icon]="'pi pi-plus'" class="p-panel-header-icon"></button>
          </div>
          <p-overlayPanel #addNoteOverlay>
            <ng-template pTemplate>
              <div class="flex flex-wrap flex-column">
                <input type="text" placeholder="Title for new Note/Folder" pInputText style="margin-bottom: 5px;"
                  #notefoldertitle />
                <div class="flex flew-wrap flex-row justify-content-between align-items-center">
                  <button pButton pRipple type="button" icon="pi pi-plus" label="Note" class="p-button-outlined"
                    (click)="onAddNoteClick(notefoldertitle.value)"></button>
                  <span>or</span>
                  <button pButton pRipple type="button" icon="pi pi-plus" label="Folder" class="p-button-outlined"
                    (click)="onAddNoteFolderClick(notefoldertitle.value)"></button>
                </div>
              </div>
            </ng-template>
          </p-overlayPanel>
        </ng-template>
        <ng-template pTemplate="content" *ngIf="noteKeys">
          <div *ngFor="let key of noteKeys" style="padding: 1px">
            <div class="flex flex-row justify-content-between hideChildUntilHoverParent">
              <div class="unbordered-element h-2rem pointerOnHover" (click)="onNoteClick(key, contentPanel)">
                {{project?.notes?.get(key)?.uniqueName}}
              </div>
              <div
                class="button-unbordered border-clickable flex flex-column flex-wrap align-content-center justify-content-center color-surface-card hideChildUntilHoverChild"
                style="width: 32px;">
                <i class="pi pi-ellipsis-v icon-button"></i>
              </div>
            </div>
          </div>
        </ng-template>
      </p-panel>
      <p-panel [toggleable]="true" #categories class="sidemenuPanel note-panel categories" [collapsed]="true">
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center">
            <button (click)="categories.toggle($event); $event.stopPropagation()" pButton pRipple type="button"
              [icon]="'pi '+(categories.collapsed?'pi-chevron-right':'pi-chevron-down')"
              class="p-panel-header-icon"></button>
            <span>
              Categories
            </span>
          </div>
        </ng-template>
        <ng-template pTemplate="icons">
          <div class="flex justify-content-between align-items-center">
            <button (click)="addCategoryOverlay.toggle($event); $event.stopPropagation()" pButton pRipple type="button"
              [icon]="'pi pi-plus'" class="p-panel-header-icon"></button>
          </div>
          <p-overlayPanel #addCategoryOverlay>
            <ng-template pTemplate>
              <div class="flex flex-wrap flex-column">
                <input type="text" placeholder="Title for new category" pInputText style="margin-bottom: 5px;" />
                <button pButton pRipple type="button" icon="pi pi-plus" label="Category"
                  class="p-button-outlined"></button>
              </div>
            </ng-template>
          </p-overlayPanel>
        </ng-template>
        <ng-template pTemplate="content">
        </ng-template>
      </p-panel>
      <p-panel [toggleable]="true" #chronicle class="sidemenuPanel note-panel chronicle" [collapsed]="true">
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center">
            <button (click)="chronicle.toggle($event); $event.stopPropagation()" pButton pRipple type="button"
              [icon]="'pi '+(chronicle.collapsed?'pi-chevron-right':'pi-chevron-down')"
              class="p-panel-header-icon"></button>
            <span>
              Chronicle
            </span>
          </div>
        </ng-template>
        <ng-template pTemplate="icons">
          <div class="flex justify-content-between align-items-center">
            <button (click)="addChronicleOverlay.toggle($event); $event.stopPropagation()" pButton pRipple type="button"
              [icon]="'pi pi-plus'" class="p-panel-header-icon"></button>
          </div>
          <p-overlayPanel #addChronicleOverlay>
            <ng-template pTemplate>
              <span>Unfortunately this feature is not yet supported by the current prototype version</span>
            </ng-template>
          </p-overlayPanel>
        </ng-template>
        <ng-template pTemplate="content">
        </ng-template>
      </p-panel>
      <p-panel [toggleable]="true" #atlas class="sidemenuPanel note-panel atlas" [collapsed]="true">
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center">
            <button (click)="atlas.toggle($event); $event.stopPropagation()" pButton pRipple type="button"
              [icon]="'pi '+(atlas.collapsed?'pi-chevron-right':'pi-chevron-down')"
              class="p-panel-header-icon"></button>
            <span>
              Atlas
            </span>
          </div>
        </ng-template>
        <ng-template pTemplate="icons">
          <div class="flex justify-content-between align-items-center">
            <button (click)="addAtlasOverlay.toggle($event); $event.stopPropagation()" pButton pRipple type="button"
              [icon]="'pi pi-plus'" class="p-panel-header-icon"></button>
            <p-overlayPanel #addAtlasOverlay>
              <ng-template pTemplate>
                <span>Unfortunately this feature is not yet supported by the current prototype version</span>
              </ng-template>
            </p-overlayPanel>
          </div>
        </ng-template>
        <ng-template pTemplate="content">
        </ng-template>
      </p-panel>
      <p-panel [toggleable]="true" #generators class="sidemenuPanel note-panel generators" [collapsed]="true">
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center">
            <button (click)="generators.toggle($event); $event.stopPropagation()" pButton pRipple type="button"
              [icon]="'pi '+(generators.collapsed?'pi-chevron-right':'pi-chevron-down')"
              class="p-panel-header-icon"></button>
            <span>
              Generators
            </span>
          </div>
        </ng-template>
        <ng-template pTemplate="icons">
          <div class="flex justify-content-between align-items-center">
            <button (click)="addGeneratorsOverlay.toggle($event); $event.stopPropagation()" pButton pRipple
              type="button" [icon]="'pi pi-plus'" class="p-panel-header-icon"></button>
          </div>
          <p-overlayPanel #addGeneratorsOverlay>
            <ng-template pTemplate>
              <span>Unfortunately this feature is not yet supported by the current prototype version</span>
            </ng-template>
          </p-overlayPanel>
        </ng-template>
        <ng-template pTemplate="content">
        </ng-template>
      </p-panel>
      <p-panel [toggleable]="true" #resources class="sidemenuPanel note-panel resources" [collapsed]="true">
        <ng-template pTemplate="header">
          <div class="flex justify-content-between align-items-center">
            <button (click)="resources.toggle($event); $event.stopPropagation()" pButton pRipple type="button"
              [icon]="'pi '+(resources.collapsed?'pi-chevron-right':'pi-chevron-down')"
              class="p-panel-header-icon"></button>
            <span>
              Resources
            </span>
          </div>
        </ng-template>
        <ng-template pTemplate="icons">
          <div class="flex justify-content-between align-items-center">
            <button (click)="addResourcesOverlay.toggle($event); $event.stopPropagation()" pButton pRipple type="button"
              [icon]="'pi pi-plus'" class="p-panel-header-icon"></button>
          </div>
          <p-overlayPanel #addResourcesOverlay>
            <ng-template pTemplate>
              <span>Unfortunately this feature is not yet supported by the current prototype version</span>
            </ng-template>
          </p-overlayPanel>
        </ng-template>
        <ng-template pTemplate="content">
        </ng-template>
      </p-panel>

      <div class="flex-grow-1"></div>
      <p-tree [value]="secondarMenu" [style]="{'width':'100%', 'padding':'0px'}">
        <ng-template let-node pTemplate="default">
          {{node.label}}
        </ng-template>
      </p-tree>
    </div>
  </div>
  <div class="center flex min-h-full w-full relative overflow-hide">
    <div class="absolute left-0 bottom-0 flex flex-column z-2 footer">
      <div class="element pi pi-arrow-circle-up"></div>
      <div class="pseudo"></div>
      <div class="element pi pi-arrow-circle-down"></div>
      <div class="pseudo"></div>
      <div class="element pi pi-window-maximize"></div>
      <div class="pseudo"></div>
      <div class="element pi pi-window-minimize"></div>
    </div>
    <div class="absolute left-43px bottom-0 flex flex-row z-3 footer">
      <div class="pi pi-globe element"></div>
      <div class="pseudo"></div>
      <div class="pi pi-plus-circle element"></div>
    </div>
    <div class="absolute right-0 bottom-0 flex flex-row z-3 footer">
      <div class="pi pi-users element"></div>
    </div>
    <p-scrollPanel class="content" [style]="{width: '100%', height: '100%'}" styleClass="custombar" #contentPanel
      id="contentPanel">
      <div style="padding-bottom: 12px;" *ngIf="project">
        <div *ngFor="let panel of project.views[project.activeViewIndex].panels">
          <div class="pseudo" #pseudo></div>
          <app-note-panel *ngIf="panelIsInstanceOf(panel, notePanelType) " [notes]="project.notes"
            [categories]="project.categories" [noteName]="castToNotePanel(panel).noteName" [panel]="panel"></app-note-panel>
        </div>
      </div>
      <div class="pseudo"></div>
    </p-scrollPanel>
  </div>
  <div class="right sidebar min-h-full w-2 p-shadow-3 overflow-hidden">
    <div class="p-1 flex flex-column h-full overflow-y-auto">
      <div class="flex flex-row">
        <span class="p-input-icon-right w-full" style="margin-bottom: 1px;">
          <i class="pi pi-search"></i>
          <input type="text" class="w-full" placeholder="Search/Link" pInputText />
        </span>
        <div
          class="button-border border-clickable flex flex-column align-content-center justify-content-center color-surface-card"
          style="margin-bottom: 1px; margin-left: 1px;">
          <i class="pi pi-ellipsis-v icon-button"></i>
        </div>
      </div>

      <div *ngFor="let index of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]">
        <div class="bordered-element h-2rem notes flex flex-row justify-content-between hideChildUntilHoverParent">
          Note {{index}}
          <div
            class="button-unbordered flex flex-column flex-wrap align-content-center justify-content-center color-surface-card hideChildUntilHoverChild">
            <i class="pi pi-ellipsis-v icon-button"></i>
          </div>
        </div>
        <div style="padding-bottom: 1px;"></div>
      </div>
    </div>
  </div>
</div>
